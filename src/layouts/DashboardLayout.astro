---
import Layout from "./Layout.astro";
import BaseFooter from "@components/footers/BaseFooter.astro";
import ThemeSwitcher from "@components/utils/ThemeSwitcher.astro";
import { getLangFromUrl , useTranslations } from "src/i18n/utils.ts";
import LocaleSwitcher from "@components/utils/LocaleSwitcher";
import BreadCrumb from "@components/utils/BreadCrumb";
import DashboardNavbar from "@components/navbars/DashboardNavbar.astro";

interface Props {
	title: string;
	description: string;
	keywords: string[];
    pages: {
        name: any;
        location: string;
        icon: string;
    }[]
}

const locale = getLangFromUrl(Astro.url);
const t = useTranslations(locale);

const advancedPages = [
    {
        name: t("dashb.set"),
        location: `#/settings`,
        icon: "wrench"
    },
    {
        name: t("dashb.profil"),
        location: `#/inbox`,
        icon: "user-o"
    },
]

const {
    pages = [],
	title = "estate-develop",
	description="page description",
	keywords = ["rent","booking","rent houses","book room","villa","appartment"]
} = Astro.props
---

<Layout 
    title={title} 
    description={description} 
    keywords={keywords}
>
    <main class="container-fluid p-0 vh-100 overflow-hidden dashwrapper">

        <nav>
            <DashboardNavbar pages={pages} advancedPages={advancedPages}/>
        </nav>

        <section class="d-flex flex-column gap-3 h-100 overflow-y-auto">

            <header class="bg-body  sticky-top d-flex justify-content-between align-items-center gap-2 p-lg-3 p-2">

                <button class="btn d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasResponsive" aria-controls="offcanvasResponsive">
                    <i class="fa fa-bars" aria-hidden="true" />
                </button>

                <section class="d-none d-md-flex gap-3">

                    <LocaleSwitcher client:only="solid-js" >
                        <i class="fa fa-spin fa-circle-o-notch"/>
                    </LocaleSwitcher>

                    <BreadCrumb client:only="solid-js" >
                        <i class="fa fa-spin fa-circle-o-notch"/>
                    </BreadCrumb>

                </section>

                


                <section class="d-flex gap-1">
                    <ThemeSwitcher />

                    <div class="dropdown">
                        <button title={t("dashb.notf")} class="btn rounded-pill" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                          <i class="fa fa-bell-o" aria-hidden="true" />
                          <small style="height: 24px;width:24px;" class="position-absolute bg-danger text-white start-50 top-50 rounded-circle"> 2</small>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end p-1 txt-small">
                          <li><a class="dropdown-item fw-bolder" href="#">My Account</a></li>
                          <li> <hr class="dropdown-divider"> </li>
                          <li><a class="dropdown-item" href="#">My  Profil</a></li>
                          <li><a class="dropdown-item" href="#">Settings</a></li>
                          <li> <hr class="dropdown-divider"> </li>
                          <li><a class="dropdown-item" href="#">Logout </a></li>
                        </ul>
                    </div>

                    <div class="dropdown">
                        <button class="btn rounded-pill" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                          <i class="fa fa-user-circle-o" aria-hidden="true" />
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end p-1 txt-small text-capitalize">
                            <li><a class="dropdown-item fw-bolder" href="#">{t("accn")}</a></li>
                            <li> <hr class="dropdown-divider"> </li>
                            <li><a class="dropdown-item" href="#/profil">{t("dashb.profil")}</a></li>
                            <li>
                                <a class="dropdown-item" href="#/settings">{t("dashb.set")}</a>
                            </li>
                            <li> <hr class="dropdown-divider"> </li>
                            <li>
                                <button id="logoutBtn" class="dropdown-item">Logout </button>
                            </li>
                        </ul>
                    </div>
                </section>

            </header>

            <slot/>

            <BaseFooter />
        </section>

    </main>

    <script src="../js/router.ts"></script>
    
</Layout>