---
import ClientFooter from "@components/footers/ClientFooter.astro";
import Layout from "./Layout.astro";
import BaseFooter from "@components/footers/BaseFooter.astro";
import ClientNavbar from "@components/navbars/ClientNavbar.astro";
import ClientHeader from "@components/headers/ClientHeader.astro";
import BreadCrumb from "@components/headers/BreadCrumb.astro";
import ThemeSwitcher from "@components/utils/ThemeSwitcher.astro";
import { getLangFromUrl , useTranslations } from "src/i18n/utils.ts";
import { map } from "astro:schema";

interface Props {
	title: string;
	description: string;
	keywords: string[];
    pages: {
        name: any;
        location: string;
        icon: string;
    }[]
}

const locale = getLangFromUrl(Astro.url);
const t = useTranslations(locale);

const advancedPages = [
    {
        name: t("dashb.set"),
        location: `#/settings`,
        icon: "wrench"
    },
    {
        name: t("dashb.profil"),
        location: `#/inbox`,
        icon: "user-o"
    },
]

const {
    pages = [],
	title = "estate-develop",
	description="page description",
	keywords = ["rent","booking","rent houses","book room","villa","appartment"]
} = Astro.props
---

<Layout 
    title={title} 
    description={description} 
    keywords={keywords}
>
    <main class="container-fluid d-flex p-0 vh-100 overflow-hidden">

        <nav class="border col-auto flex-shrink-0">

            <aside class="offcanvas-md offcanvas-end" tabindex="-1" id="offcanvasResponsive" aria-labelledby="offcanvasResponsiveLabel">

                <div class="offcanvas-header justify-content-end">
                    <button type="button" class="btn " data-bs-dismiss="offcanvas" data-bs-target="#offcanvasResponsive" aria-label="Close">
                        <i class="fa fa-times" aria-hidden="true" />
                    </button>
                </div>

                <section class="offcanvas-body flex-column justify-content-between gap-3 p-3 p-xl-4 vh-100 text-capitalize">

                    <div>
                        <h5 class="mb-4 fw-bold text-uppercase">
                            <i class="fa fa-cube me-1" />
                            <span class="d-md-none d-lg-inline">{t("dashb.name")}</span>
                        </h5>
                        {pages.map( (item,index)  =>  <label class="dashpg" >
                            <input type="radio" class="btn-check" name="host-page" value={item.location} id={`page${index}`} checked={index === 0} autocomplete="off" />
                           <i class={`fa fa-${item.icon} me-lg-2 me-1`} aria-hidden="true"/>
                           <span class="d-md-none d-lg-inline">{item.name}</span>
                       </label>)}
                    </div>

                    <div class="mb-0">

                        <h6 class="d-md-none d-lg-block border-bottom pb-2 my-3">
                            {t("dashb.accSet")}
                        </h6>

                        {advancedPages.map( (item,index)  =>  <label class="dashpg" >
                            <input type="radio" class="btn-check" name="host-page" value={item.location} id={`page${index}`} autocomplete="off" />
                            <i class={`fa fa-${item.icon} me-lg-2 me-1`} aria-hidden="true"/>
                            <span class="d-md-none d-lg-inline">{item.name}</span>
                       </label>)}
                    </div>
                    
                </section>

            </aside>

        </nav>


        <section class="col-12 col-md-11 col-lg-9 col-xxl-10 max-w-100 flex-shrink-0 d-flex flex-column gap-3 h-100 overflow-y-auto">

            <header class="bg-body border-bottom  sticky-top d-flex justify-content-between align-items-center gap-2 p-lg-3 p-2">


                <button class="btn d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasResponsive" aria-controls="offcanvasResponsive">
                    <i class="fa fa-bars" aria-hidden="true" />
                </button>

                <div>Breadcrumb > link > subLink </div>


                <section class="d-flex gap-1">
                    <ThemeSwitcher />

                    <div class="dropdown">
                        <button title={t("dashb.notf")} class="btn rounded-pill" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                          <i class="fa fa-bell-o" aria-hidden="true" />
                          <small style="height: 24px;width:24px;" class="position-absolute bg-danger text-white start-50 top-50 rounded-circle"> 2</small>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end p-1 txt-small">
                          <li><a class="dropdown-item fw-bolder" href="#">My Account</a></li>
                          <li> <hr class="dropdown-divider"> </li>
                          <li><a class="dropdown-item" href="#">My  Profil</a></li>
                          <li><a class="dropdown-item" href="#">Settings</a></li>
                          <li> <hr class="dropdown-divider"> </li>
                          <li><a class="dropdown-item" href="#">Logout </a></li>
                        </ul>
                    </div>

                    <div class="dropdown">
                        <button class="btn rounded-pill" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                          <i class="fa fa-user-circle-o" aria-hidden="true" />
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end p-1 txt-small">
                          <li><a class="dropdown-item fw-bolder" href="#">My Account</a></li>
                          <li> <hr class="dropdown-divider"> </li>
                          <li><a class="dropdown-item" href="#">My  Profil</a></li>
                          <li><a class="dropdown-item" href="#">Settings</a></li>
                          <li> <hr class="dropdown-divider"> </li>
                          <li><a class="dropdown-item" href="#">Logout </a></li>
                        </ul>
                      </div>
                </section>

            </header>

            <slot/>

            <BaseFooter />
        </section>

    </main>

    <script src="../js/router.ts"></script>
    
</Layout>

<style>

    .dashpg {
        display: block;
        /* font-size: medium; */
        padding: .25em .5em;
        margin: .25rem auto;
        border-radius: var(--bs-border-radius);
        color: var(--bs-secondary-color);
        cursor: pointer;
        transition: color 0.2s linear;
    }

    .dashpg:has(input:checked) {
        background: var(--bs-border-color);
        border: 1px solid var(--bs-border-color);
        color: inherit
    }
    
</style>