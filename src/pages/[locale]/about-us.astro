---
import type { GetStaticPaths } from "astro";
import Team from "@components/reusables/Team.astro";
import Partners from "@components/reusables/Partners.astro";
import NeedHelp from "@components/reusables/NeedHelp.astro";

import ClientLayout from "@layouts/ClientLayout.astro";
import { languages } from "../../i18n/ui.ts";

export const getStaticPaths = (() => {
    const langs = Object.keys(languages);
    return langs.map( locale => {
        return { params : { locale }}
    })
}) satisfies GetStaticPaths;

const { locale } = Astro.params;

interface RealEstateQuestion {
    question: string;
    answer: string;
    href?: string; // Optional link for further details
}

const realEstateFAQs: RealEstateQuestion[] = [
    {
        question: "What is the booking process?",
        answer: "You can browse properties on our platform, filter by your preferences, and book directly with the host.",
        href: "/help/booking-process",
    },
    {
        question: "How do I pay for my reservation?",
        answer: "We offer secure online payment options, including credit card and debit card payments.",
        href: "/help/payment-options",
    },
    {
        question: "What is the cancellation policy?",
        answer: "Cancellation policies vary depending on the host. Please review the cancellation policy before booking.",
        href: "/help/cancellation-policy",
    },
    {
        question: "How do I contact the host?",
        answer: "You can contact the host through our secure messaging platform within the platform.",
        href: "/help/contact-host",
    },
    {
        question: "What are the check-in and check-out times?",
        answer: "Check-in and check-out times vary depending on the property. Please check the property details for specific times.",
    },
    {
        question: "What amenities are typically included?",
        answer: "Amenities vary depending on the property, but common amenities include Wi-Fi, kitchen, linens, and towels.",
    },
    {
        question: "How do I leave a review for my stay?",
        answer: "You can leave a review for your host and the property after your stay is complete.",
        href: "/help/leave-a-review",
    },
    {
        question: "What if I have a problem during my stay?",
        answer: "Please contact our customer support team immediately. We are available 24/7 to assist you.",
        href: "/help/contact-support",
    },
];

const heading = {
    title: locale == "en" ? "about-us" : "A propos",
    description : locale == "en" ? "Who we are , why us,what we do better ?":"Qui nous sommes, Pourquoi travailler avec nous?",
    keywords:  locale == "en" ?["Best seo optimization"] : ["Nous"]
}
---

<ClientLayout title={heading.title} description={heading.description} keywords={heading.keywords} >
    
    <main
        class="container-fluid p-0 bg-body-tertiary d-flex flex-column gap-4 align-items-center"
    >




        <section class="container-sm py-3 row align-items-center g-4">


            <h1 class="col-md-6" data-iobs="slide-up text-lg-end">Our StoRy</h1>
            <p class="col-md-6">
                Reiciendis dignissimos commodi inventore nisi, 
                error sint animi illo expedita veniam libero possimus tempora 
                ipsam iste doloribus sequi cumque ullam delectus autem!
                Ducimus eum alias corporis, voluptatum nostrum repudiandae
                unde distinctio voluptates maxime molestias quod, a
                officiis. Culpa iste deleniti at sed?
            </p>


            <aside class="col-md-6">
                <img
                    class="object-fit-cover border rounded"
                    style={{ "max-width": "100%", "min-height": "20vh" }}
                    src="/images/img-2x1.png"
                    loading="lazy"
                />
            </aside>

           

            <aside id="services" class="col-md-6">

                <p>Services</p>
                <h4 class="fw-bold text-body-emphasis">
                    Competitive Advantage & <br/> Market Opportunity
                </h4>

                <p>
                    Ready to go beyond the starter design? Check out these
                    open source projects that you can quickly duplicate.
                </p>

                <ul
                    class="w-100 list-unstyled ps-0 row row-cols-1 g-3"
                >
                    {
                        [1, 2, 3, 4].map((item) => (
                            <div data-iobs="slide-right" class="col d-flex gap-2">
                                <i
                                    class="btn border-end border-2 rounded-pill"
                                >{item}</i>
                                <details>
                                    <summary class="fw-bold">service {item} Epcot Center</summary>
                                    <p>Epcot is a theme park at Walt Disney World Resort featuring exciting attractions, international pavilions, award-winning fireworks and seasonal special events.</p>
                                </details>
                            </div>
                        ))
                    }
                </ul>
            </aside>

            
        </section>

        <section class="container-fluid bg-body p-4">
            <div
                class="container g-3 nav justify-content-center align-items-center text-center mx-auto"
            >
                <p class="col fw-bold lh-sm">
                    <strong class="fs-2"> 
                        <span data-increment="10">10</span>  k+
                    </strong> <br/>
                    <span>Clients</span>
                </p>

                <p data-iobs="" class="col lh-sm">
                    <strong class="fs-2"> 
                        <span data-increment="100">10</span>+
                    </strong> <br/>
                    <span>Agents</span>
                </p>

                <p class="col lh-sm">
                    <strong class="fs-2"> 
                        <span data-increment="23">0</span>+
                    </strong> <br/>
                    <span>Estates</span>
                </p>

                <p class="col lh-sm">
                    <strong class="fs-2"> 
                        <span data-increment="12">0</span>
                    </strong> <br/>
                    <span>Employees</span>
                </p>
            </div>
        </section>

        <section data-iobs="up" id="FAQ" class="container-xl py-5 px-2 row g-2">

            <aside class="col-md-12 col-lg-5">
                <h2>Do you have any Question ? Please check the FAQ</h2>
                <p>
                    Itaque consequatur at neque, numquam facere, ratione cum sed
                    architecto nobis cumque, porro dolorem quidem. Lorem ipsum
                    dolor sit amet consectetur adipisicing elit. Possimus
                    excepturi magnam debitis officia rem aperiam.
                </p>
            </aside>

            <ul class="col nav flex-column gap-3 accordion accordion-flush" id="accordionFAQ">
                {
                    realEstateFAQs.map((item, index) => (
                        <li class="accordion-item bg-body rounded-4 p-1">

                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed rounded-3" type="button" data-bs-toggle="collapse" data-bs-target={`#flush-collapse${index}`} aria-expanded="false" aria-controls="flush-collapseOne">
                                    {item.question}
                                </button>
                            </h2>
                            <div id={`flush-collapse${index}`} class="accordion-collapse collapse" data-bs-parent="#accordionFAQ">
                                <div class="accordion-body">
                                    {item.answer}
                                </div>
                            </div>
                        </li>
                    ))
                }
            </ul>
        </section>

        <section id="team" class="container-fluid bg-body py-2">
            <h2 class="text-center">Our Team</h2>
            <Team />
        </section>

        <section id="team" class="container-fluid py-2">
            <h2 class="text-center">Partners</h2>
            <Partners />
        </section>

        <NeedHelp />
    </main>
</ClientLayout>


<script>

    const all: NodeListOf<Element> = document?.querySelectorAll("[data-increment]");

    const increase = (e: IntersectionObserverEntry["target"] ) => {
        let target: number = parseInt(e.getAttribute("data-increment") ?? "0") ?? 0;
        let number = 0;
        var interval = setInterval(function() {
            e.innerHTML = number?.toString() ;
            if (number >= target) clearInterval(interval);
            number++;
        }, 100);
    }

    const dOpts = {
        threshold: 0.1, // Adjust threshold as needed (0 to 1)
    }

    const displayObserver:IntersectionObserver = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            increase(entry.target);
            displayObserver.unobserve(entry.target); // Optional: Stop observing after entering view
          }
        });
    }, dOpts );

    
    all.forEach( element => displayObserver.observe(element) );

</script>